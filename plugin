{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://i2analyze.github.io/schemas/plugin",
  "type": "object",
  "title": "The root schema",
  "description": "The root schema comprises the entire JSON document.",
  "examples": [
    {
      "pluginId": "6ad4bc2a-c5ff-4c24-bbc8-3232d15e7564",
      "pluginVersion": "1.3",
      "name": "My React Plugin",
      "entryPointUrl": "./entrypoint.js",
      "csp": {
        "connect-src": "http://external-server-that-should-be-allowed",
        "image-src": "http://external-tile-server-that-should-be-allowed"
      }
    }
  ],
  "required": ["pluginId", "pluginVersion", "name", "entryPointUrl"],
  "properties": {
    "$schema": { "type": "string" },
    "pluginId": {
      "$id": "#/properties/pluginId",
      "type": "string",
      "title": "The id of the plug-in.",
      "minLength": 36,
      "maxLength": 36,
      "pattern": "[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}",
      "examples": ["<GUID>"]
    },
    "pluginVersion": {
      "$id": "#/properties/pluginVersion",
      "type": "string",
      "title": "The version of the plug-in.",
      "minLength": 1,
      "examples": ["1.3"]
    },
    "name": {
      "$id": "#/properties/name",
      "type": "string",
      "title": "The displayable name of the plug-in.",
      "minLength": 1,
      "examples": ["My analysis plug-in"]
    },
    "entryPointUrl": {
      "$id": "#/properties/entryPointUrl",
      "type": "string",
      "title": "The location of the entry point JS file as a relative URL path.",
      "minLength": 1,
      "examples": ["./entrypoint.js"]
    },
    "csp": {
      "$id": "#/properties/csp",
      "type": "object",
      "title": "Entries that should be added to the Content-Security-Policy.",
      "default": {},
      "examples": [
        {
          "connect-src": "http://external-server-that-should-be-allowed",
          "image-src": "http://external-tile-server-that-should-be-allowed"
        }
      ],
      "patternProperties": {
        ".*": { "type": "string", "minLength": 1 }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
